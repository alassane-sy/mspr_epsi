{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Field, ErrorMessage } from \"vee-validate\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nexport default {\n  name: \"RegisterLogin\",\n  components: {\n    Field,\n    ErrorMessage\n  },\n  data() {\n    const schema = yup.object().shape({\n      username: yup.string().required(\"Un identifiant est nécessaire!\").min(3, \"Dois contenir plus de 3 caractéres !\").max(20, \"Dois contenir au maximum 20 caractéres !\"),\n      email: yup.string().required(\"Un mail est nécessaire!\").email(\"Email invalid!\").max(50, \"Dois contenir au maximum 20 caractéres!\"),\n      password: yup.string().required(\"Mot de passe nécessaire !\").min(8, \"Dois contenir au moins 8 caractéres !\").max(40, \"Dois contenir au maximum 20 caractéres!\")\n    });\n    return {\n      successful: false,\n      loading: false,\n      message: \"\",\n      schema,\n      email: \"\",\n      name: \"\",\n      prenom: \"\",\n      password: \"\"\n    };\n  },\n  methods: {\n    async submit() {\n      try {\n        let response = await axios.post(\"http://localhost:3000/signup\", {\n          nom: this.nom,\n          prenom: this.prenom,\n          email: this.email,\n          mdp: this.mdp\n        });\n        console.log(\"response login\", response);\n        const data = response.data;\n        console.log(data);\n        if (data[\"status\"] != 400 || data[\"success\"]) {\n          response = await axios.post(\"http://localhost:3000/login\", {\n            email: this.email,\n            mdp: this.mdp\n          });\n          // Enregistrer le jeton d'authentification dans le stockage local ou dans un cookie\n          localStorage.setItem('authToken', response.data.token);\n          // Rediriger l'utilisateur vers la page suivante\n          this.$router.push('/profil');\n        } else {\n          // Afficher un message d'erreur à l'utilisateur\n          alert(data.message);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["Field","ErrorMessage","yup","axios","name","components","data","schema","object","shape","username","string","required","min","max","email","password","successful","loading","message","prenom","methods","submit","response","post","nom","mdp","console","log","localStorage","setItem","token","$router","push","alert","error"],"sources":["/Users/syalassanealy/Downloads/a-rosa-je_mspr_epsi/arosaje-app/src/views/RegisterView.vue"],"sourcesContent":["<template>\n  <div class=\"containnerform\">\n    <div class=\"bloc\">\n      <div class=\"form\">\n        <img\n          src=\"https://media.istockphoto.com/id/536037199/fr/vectoriel/main-tenant-plante-logo-concept-de-croissance-vector-illustration.jpg?s=612x612&w=0&k=20&c=4H35vhMOuQ90StwU-d7WXmFhrqKfQH5AfKTjrJHlaXo=\"\n          alt=\"logoaro\" />\n        <form @submit.prevent=\"submit\" :validation-schema=\"schema\">\n          <div v-if=\"!successful\">\n            <div class=\"name\">\n            <div class=\"form-group\">\n              <label for=\"username\">Nom</label>\n              <Field name=\"name\" type=\"text\" v-model=\"nom\" class=\"form-control\" />\n              <ErrorMessage name=\"name\" class=\"error-feedback\" />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"username\">Prenom</label>\n              <Field name=\"prenom\" type=\"text\" v-model=\"prenom\" class=\"form-control\" />\n              <ErrorMessage name=\"prenom\" class=\"error-feedback\" />\n            </div>\n            </div>\n            <div class=\"name\">\n            <div class=\"form-group\">\n              <label for=\"email\">Email</label>\n              <Field name=\"email\" type=\"email\" v-model=\"email\" class=\"form-control\" />\n              <ErrorMessage name=\"email\" class=\"error-feedback\" />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"password\">Password</label>\n              <Field name=\"password\" type=\"password\" class=\"form-control\" v-model=\"mdp\" />\n              <ErrorMessage name=\"password\" class=\"error-feedback\" />\n            </div>\n              </div>\n            <div class=\"politic\">\n\n            <label class=\"text-grey-600 cursor-pointer text-xs text-justify\">\n              <input type=\"checkbox\" name=\"terms\" required=\"required\" value=\"1\" tabindex=\"5\">\n              J'ai lu et accepté les Conditions Générales d'Utilisation <br>ainsi que la Politique de confidentialité.<br>\n            </label>\n            </div>\n\n            <div class=\"submit\">\n              <button type=\"submit\" class=\"btn  btn-block\">\n\n                Inscription\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class=\"text\">\n        <div class=\"bloci\">\n          <p>\n            Vous n'avez pas de compte inscrivez-vous pour accéder à nos services\n          </p>\n          <div class=\"mybtn\">\n            <button onclick=\"window.location.href = '/login';\" class=\"btn btn-block\" :disabled=\"loading\">\n              <span v-show=\"loading\" class=\"spinner-border spinner-border-sm\"></span>\n\n              <span>Connexion</span>\n            </button>\n          </div>\n        </div>\n\n        <div v-if=\"message\" class=\"alert\" :class=\"successful ? 'alert-success' : 'alert-danger'\">\n          {{ message }}\n        </div>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Field, ErrorMessage } from \"vee-validate\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\n\nexport default {\n  name: \"RegisterLogin\",\n  components: {\n    Field,\n    ErrorMessage,\n  },\n  data() {\n    const schema = yup.object().shape({\n      username: yup\n        .string()\n        .required(\"Un identifiant est nécessaire!\")\n        .min(3, \"Dois contenir plus de 3 caractéres !\")\n        .max(20, \"Dois contenir au maximum 20 caractéres !\"),\n      email: yup\n        .string()\n        .required(\"Un mail est nécessaire!\")\n        .email(\"Email invalid!\")\n        .max(50, \"Dois contenir au maximum 20 caractéres!\"),\n      password: yup\n        .string()\n        .required(\"Mot de passe nécessaire !\")\n        .min(8, \"Dois contenir au moins 8 caractéres !\")\n        .max(40, \"Dois contenir au maximum 20 caractéres!\"),\n    });\n\n    return {\n      successful: false,\n      loading: false,\n      message: \"\",\n      schema,\n      email: \"\",\n      name: \"\",\n      prenom: \"\",\n      password: \"\",\n    };\n  },\n  methods: {\n    async submit() {\n      try {\n        let response = await axios.post(\"http://localhost:3000/signup\", {\n          nom: this.nom,\n          prenom: this.prenom,\n          email: this.email,\n          mdp: this.mdp,\n        });\n        console.log(\"response login\", response);\n        const data = response.data;\n        console.log(data);\n        if (data[\"status\"] != 400 || data[\"success\"]) {\n          response = await axios.post(\"http://localhost:3000/login\", {\n            email: this.email,\n            mdp: this.mdp,\n          });\n          // Enregistrer le jeton d'authentification dans le stockage local ou dans un cookie\n          localStorage.setItem('authToken', response.data.token);\n          // Rediriger l'utilisateur vers la page suivante\n          this.$router.push('/profil');\n        } else {\n          // Afficher un message d'erreur à l'utilisateur\n          alert(data.message);\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    },\n  },\n};\n</script>\n\n\n<style>\n\n.containnerform {\n  margin: auto;\n  width: 70%;\n  height: 50%;\n}\n.politic{\n  margin-top:30px;\n  margin-bottom: 20px;\n}\n\n.bloc {\n  margin-top: 50px;\n  display: flex;\n  justify-content: space-between;\n  box-shadow: 10px 5px 5px gray;\n  height: 500px;\n}\n\n.form {\n  margin-right: 70px !important;\n  width: 500px;\n  margin-top: 20px;\n}\n.name{\n  display:flex;\n  justify-content: space-around;\n}\n\n.text {\n\n  width: 35%;\n  height: 100%;\n  background-color: forestgreen;\n}\n\n.bloci {\n  margin-top: 150px;\n  text-align: center;\n  font-size: 18px;\n  padding: 20px;\n}\n\n.mybtn button {\n  width: 30vh;\n  margin: auto;\n  background-color: white;\n}\n\n.form img {\n  width: 100px;\n  height: 100px;\n  margin-left: 150px;\n}\n\n.text p {\n  color: white;\n}\n\n\n.titre {\n  margin-left: 50px;\n}\n\na {\n  color: white;\n}\n\na :hover {\n  color: forestgreen;\n}\n.btn{\n  top:20px;\n  width:200px;\n  margin:auto;\n  background-color: forestgreen;\n\n}\n\n.btnc {\n  background-color: forestgreen;\n  height: 40px;\n  color: white;\n}\n\n@media screen and (max-width: 756px) {\n  .containnerform {\n    height: 100vh;\n    width: 40vh;\n  }\n\n  .bloc {\n    width: 300px;\n    height: 800px;\n    display: flex;\n    flex-direction: column;\n    margin-left: 10px;\n    margin-top: 20px;\n  }\n\n  .form {\n    margin-right: 100px !important;\n    width: 280px;\n    margin-top: 20px;\n  }\n\n  .text {\n    width: 100%;\n    height: 30%;\n    background-color: forestgreen;\n  }\n\n}\n</style>\n\n\n"],"mappings":";AA0EA,SAASA,KAAK,EAAEC,YAAW,QAAS,cAAc;AAClD,OAAO,KAAKC,GAAE,MAAO,KAAK;AAC1B,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE;IACVL,KAAK;IACLC;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,MAAMC,MAAK,GAAIL,GAAG,CAACM,MAAM,EAAE,CAACC,KAAK,CAAC;MAChCC,QAAQ,EAAER,GAAE,CACTS,MAAM,EAAC,CACPC,QAAQ,CAAC,gCAAgC,EACzCC,GAAG,CAAC,CAAC,EAAE,sCAAsC,EAC7CC,GAAG,CAAC,EAAE,EAAE,0CAA0C,CAAC;MACtDC,KAAK,EAAEb,GAAE,CACNS,MAAM,EAAC,CACPC,QAAQ,CAAC,yBAAyB,EAClCG,KAAK,CAAC,gBAAgB,EACtBD,GAAG,CAAC,EAAE,EAAE,yCAAyC,CAAC;MACrDE,QAAQ,EAAEd,GAAE,CACTS,MAAM,EAAC,CACPC,QAAQ,CAAC,2BAA2B,EACpCC,GAAG,CAAC,CAAC,EAAE,uCAAuC,EAC9CC,GAAG,CAAC,EAAE,EAAE,yCAAyC;IACtD,CAAC,CAAC;IAEF,OAAO;MACLG,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE,KAAK;MACdC,OAAO,EAAE,EAAE;MACXZ,MAAM;MACNQ,KAAK,EAAE,EAAE;MACTX,IAAI,EAAE,EAAE;MACRgB,MAAM,EAAE,EAAE;MACVJ,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDK,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb,IAAI;QACF,IAAIC,QAAO,GAAI,MAAMpB,KAAK,CAACqB,IAAI,CAAC,8BAA8B,EAAE;UAC9DC,GAAG,EAAE,IAAI,CAACA,GAAG;UACbL,MAAM,EAAE,IAAI,CAACA,MAAM;UACnBL,KAAK,EAAE,IAAI,CAACA,KAAK;UACjBW,GAAG,EAAE,IAAI,CAACA;QACZ,CAAC,CAAC;QACFC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEL,QAAQ,CAAC;QACvC,MAAMjB,IAAG,GAAIiB,QAAQ,CAACjB,IAAI;QAC1BqB,OAAO,CAACC,GAAG,CAACtB,IAAI,CAAC;QACjB,IAAIA,IAAI,CAAC,QAAQ,KAAK,GAAE,IAAKA,IAAI,CAAC,SAAS,CAAC,EAAE;UAC5CiB,QAAO,GAAI,MAAMpB,KAAK,CAACqB,IAAI,CAAC,6BAA6B,EAAE;YACzDT,KAAK,EAAE,IAAI,CAACA,KAAK;YACjBW,GAAG,EAAE,IAAI,CAACA;UACZ,CAAC,CAAC;UACF;UACAG,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEP,QAAQ,CAACjB,IAAI,CAACyB,KAAK,CAAC;UACtD;UACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,SAAS,CAAC;QAC9B,OAAO;UACL;UACAC,KAAK,CAAC5B,IAAI,CAACa,OAAO,CAAC;QACrB;MACF,EAAE,OAAOgB,KAAK,EAAE;QACdR,OAAO,CAACQ,KAAK,CAACA,KAAK,CAAC;MACtB;IACF;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}